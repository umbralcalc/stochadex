<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
  <link rel="icon" type="image/x-icon" href="../assets/favicon.ico">
  <style>
    .body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
      color: #1F2328;
      background-color: #ffff;
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
      line-height: 1.5;
      word-wrap: break-word;
      text-align: left;
    }

    .body h1 {
      margin: 0;
      font-size: 200%;
      color: rgb(42, 65, 83);
      border-radius: 6px;
      word-wrap: break-word;
      text-align: left;
    }

    .body h2, h3, h4, h5 {
      margin: 0;
      font-size: 150%;
      color: rgb(42, 65, 83);
      border-radius: 6px;
      word-wrap: break-word;
      text-align: left;
    }

    .body li {
      text-align: left;
    }

    .body strong {
      color: rgb(42, 65, 83);
    }

    .body a {
      color: #0969da;
      font-weight: bold;
      text-decoration: none;
    }

    .body a:hover {
      color: LightGrey;
    }

    code {
      padding: .5em 1em;
      font-size: 95%;
      color: #F5F5F5;
      background-color: rgb(42, 65, 83);
      border-radius: 6px;
      overflow: auto;
      display: block;
    }

    .centered {
      text-align: center;
    }

    img:not(.no-center), 
    svg:not(.no-center) {
      display: block;
      margin: 1em auto;
      max-width: 100%;
      height: auto;
    }

    img.no-center, 
    svg.no-center {
      display: inline;
      margin: 0;
    }

    .otherimgs {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .otherimgs img {
      display: inline-block;
      height: auto;
      margin: 0;
    }

    .body .navbar {
      padding:8px 16px;
      float:right;
      width:auto;
      border:none;
      display:block;
      outline:0;
      color: LightGrey;
    }

    .logofavicon {
      vertical-align: middle;
    }

    .body .repotitle {
      float: left;
      text-align: left;
    }

    strong.nameRepo {
      color: rgb(42, 65, 83);
    }

    .body .navbar:hover {
      color: rgb(42, 65, 83);
    }

    .csl-entry {
      display: flex;
      margin-top: 15px;
    }

    #references {
      margin-bottom: 0.5em;
    }

    .csl-left-margin {
      margin-right: 10px;
    }

    .custom-spacer {
      display: block;
      height: 1em;
    }

    @media (max-width: 767px) {
      .body {
        padding: 15px;
      }
      p {
        overflow-x: auto;
      }
      p span.math.display {
        display: inline-block;
        overflow-x: auto;
        white-space: nowrap;
      }
    }
  </style>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<article class="body">
<a class="navbar" href="https://umbralcalc.github.io/stochadex">
Home
</a>
<a class="navbar" href="https://umbralcalc.github.io/stochadex/pages/quickstart.html">
Quickstart
</a>
<div class="repotitle">
<span class="logofavicon"> <img src="../assets/logo.png" width="120"></img></span>
</div>
</br>
</br>
</br>
<!-- Code generated by gomarkdoc. DO NOT EDIT -->
<h1 id="keyboard">keyboard</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="st">&quot;github.com/umbralcalc/stochadex/pkg/keyboard&quot;</span></span></code></pre></div>
<p>Package keyboard provides interactive user input capabilities for
stochadex simulations. It enables real-time user interaction during
simulation runs through keyboard events, allowing for dynamic control
and parameter adjustment during execution.</p>
<p>Key Features:</p>
<ul>
<li>Real-time keyboard event handling</li>
<li>Configurable key-to-action mapping</li>
<li>Timeout-based input handling</li>
<li>Graceful exit and cleanup</li>
<li>Extensible input channel abstraction</li>
</ul>
<p>Usage Patterns:</p>
<ul>
<li>Pause/resume simulations with keyboard shortcuts</li>
<li>Adjust simulation parameters in real-time</li>
<li>Trigger data export or analysis during runs</li>
<li>Implement interactive debugging and monitoring</li>
<li>Create user-controlled simulation scenarios</li>
</ul>
<h2 id="index">Index</h2>
<ul>
<li><a href="#KeystrokeChannel">type KeystrokeChannel</a></li>
<li><a href="#StandardKeystrokeChannel">type
StandardKeystrokeChannel</a>
<ul>
<li><a href="#StandardKeystrokeChannel.Get">func (s
*StandardKeystrokeChannel) Get(partitionIndex int, settings
*simulator.Settings) (&lt;-chan keyboard.KeyEvent, error)</a></li>
</ul></li>
<li><a href="#UserInputIteration">type UserInputIteration</a>
<ul>
<li><a href="#UserInputIteration.Configure">func (u *UserInputIteration)
Configure(partitionIndex int, settings *simulator.Settings)</a></li>
<li><a href="#UserInputIteration.Iterate">func (u *UserInputIteration)
Iterate(params *simulator.Params, partitionIndex int, stateHistories
[]*simulator.StateHistory, timestepsHistory
*simulator.CumulativeTimestepsHistory) []float64</a></li>
</ul></li>
</ul>
<p><a name="KeystrokeChannel"></a></p>
<h2 id="type-keystrokechannel">type <a
href="https://github.com/umbralcalc/stochadex/blob/main/pkg/keyboard/user_input.go#L17-L22">KeystrokeChannel</a></h2>
<p>KeystrokeChannel abstracts a source of keyboard events.</p>
<p>Usage hints:</p>
<ul>
<li>Implement to inject custom key event sources (e.g., tests or
GUIs).</li>
<li>The default StandardKeystrokeChannel reads from the terminal.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> KeystrokeChannel <span class="kw">interface</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    Get<span class="op">(</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        partitionIndex <span class="dt">int</span><span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        settings <span class="op">*</span>simulator<span class="op">.</span>Settings<span class="op">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">)</span> <span class="op">(&lt;-</span><span class="kw">chan</span> keyboard<span class="op">.</span>KeyEvent<span class="op">,</span> <span class="dt">error</span><span class="op">)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><a name="StandardKeystrokeChannel"></a></p>
<h2 id="type-standardkeystrokechannel">type <a
href="https://github.com/umbralcalc/stochadex/blob/main/pkg/keyboard/user_input.go#L25">StandardKeystrokeChannel</a></h2>
<p>StandardKeystrokeChannel retrieves keystrokes from the terminal.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> StandardKeystrokeChannel <span class="kw">struct</span><span class="op">{}</span></span></code></pre></div>
<p><a name="StandardKeystrokeChannel.Get"></a></p>
<h3 id="func-standardkeystrokechannel-get">func
(*StandardKeystrokeChannel) <a
href="https://github.com/umbralcalc/stochadex/blob/main/pkg/keyboard/user_input.go#L27-L30">Get</a></h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>s <span class="op">*</span>StandardKeystrokeChannel<span class="op">)</span> Get<span class="op">(</span>partitionIndex <span class="dt">int</span><span class="op">,</span> settings <span class="op">*</span>simulator<span class="op">.</span>Settings<span class="op">)</span> <span class="op">(&lt;-</span><span class="kw">chan</span> keyboard<span class="op">.</span>KeyEvent<span class="op">,</span> <span class="dt">error</span><span class="op">)</span></span></code></pre></div>
<p><a name="UserInputIteration"></a></p>
<h2 id="type-userinputiteration">type <a
href="https://github.com/umbralcalc/stochadex/blob/main/pkg/keyboard/user_input.go#L93-L99">UserInputIteration</a></h2>
<p>UserInputIteration provides real-time user interaction during
simulation runs through keyboard input handling and action mapping.</p>
<p>This iteration type enables interactive control of simulations by
mapping keyboard events to simulation actions. It supports configurable
key mappings, timeout handling, and graceful exit functionality.</p>
<p>Interactive Features:</p>
<ul>
<li>Real-time keyboard event processing</li>
<li>Configurable key-to-action mapping</li>
<li>Timeout-based input handling for non-blocking operation</li>
<li>Graceful exit with ESC key</li>
<li>Default value fallback for timeouts</li>
</ul>
<p>Configuration Parameters:</p>
<ul>
<li>“user_input_keystroke_action_&lt;key&gt;”: Maps key characters to
action IDs</li>
<li>“wait_milliseconds”: Timeout duration for input waiting
(optional)</li>
<li>“default_value”: Default action ID used on timeout or exit</li>
</ul>
<p>Key Mapping: Key mappings are configured using parameters named
“user_input_keystroke_action_&lt;key&gt;” where &lt;key&gt; is the
character that triggers the action. For example:</p>
<ul>
<li>“user_input_keystroke_action_p” =&gt; 1 (pause action)</li>
<li>“user_input_keystroke_action_r” =&gt; 2 (resume action)</li>
<li>“user_input_keystroke_action_s” =&gt; 3 (stop action)</li>
</ul>
<p>Example Configuration:</p>
<pre><code>iteration := &amp;UserInputIteration{
    Channel: &amp;StandardKeystrokeChannel{},
}

// Configure key mappings
params.Set(&quot;user_input_keystroke_action_p&quot;, []float64{1}) // pause
params.Set(&quot;user_input_keystroke_action_r&quot;, []float64{2}) // resume
params.Set(&quot;user_input_keystroke_action_s&quot;, []float64{3}) // stop
params.Set(&quot;wait_milliseconds&quot;, []float64{100})           // 100ms timeout
params.Set(&quot;default_value&quot;, []float64{0})                 // no action</code></pre>
<p>Usage Patterns:</p>
<ul>
<li>Interactive simulation control: Allow users to pause, resume, or
stop simulations</li>
<li>Parameter adjustment: Enable real-time parameter modification</li>
<li>Monitoring and intervention: Provide manual override
capabilities</li>
<li>Educational tools: Create interactive learning experiences</li>
</ul>
<p>Thread Safety:</p>
<ul>
<li>Safe for concurrent use within simulation partitions</li>
<li>Uses channels for thread-safe communication</li>
<li>Automatic cleanup on exit</li>
</ul>
<p>Performance:</p>
<ul>
<li>Non-blocking operation with timeout support</li>
<li>Minimal memory overhead</li>
<li>Efficient event processing</li>
</ul>
<p>Error Handling:</p>
<ul>
<li>Graceful handling of keyboard initialization errors</li>
<li>Automatic fallback to default values on timeout</li>
<li>Clean exit on ESC key press</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> UserInputIteration <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    Channel KeystrokeChannel</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// contains filtered or unexported fields</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><a name="UserInputIteration.Configure"></a></p>
<h3 id="func-userinputiteration-configure">func (*UserInputIteration) <a
href="https://github.com/umbralcalc/stochadex/blob/main/pkg/keyboard/user_input.go#L101-L104">Configure</a></h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>u <span class="op">*</span>UserInputIteration<span class="op">)</span> Configure<span class="op">(</span>partitionIndex <span class="dt">int</span><span class="op">,</span> settings <span class="op">*</span>simulator<span class="op">.</span>Settings<span class="op">)</span></span></code></pre></div>
<p><a name="UserInputIteration.Iterate"></a></p>
<h3 id="func-userinputiteration-iterate">func (*UserInputIteration) <a
href="https://github.com/umbralcalc/stochadex/blob/main/pkg/keyboard/user_input.go#L129-L134">Iterate</a></h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>u <span class="op">*</span>UserInputIteration<span class="op">)</span> Iterate<span class="op">(</span>params <span class="op">*</span>simulator<span class="op">.</span>Params<span class="op">,</span> partitionIndex <span class="dt">int</span><span class="op">,</span> stateHistories <span class="op">[]*</span>simulator<span class="op">.</span>StateHistory<span class="op">,</span> timestepsHistory <span class="op">*</span>simulator<span class="op">.</span>CumulativeTimestepsHistory<span class="op">)</span> <span class="op">[]</span><span class="dt">float64</span></span></code></pre></div>
<p>Generated by <a
href="https://github.com/princjef/gomarkdoc">gomarkdoc</a></p>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</article>
</html>