<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# simulator

```go
import "github.com/umbralcalc/stochadex/pkg/simulator"
```

## Index

- [Variables](<#variables>)
- [func RunWithHarnesses\(settings \*Settings, implementations \*Implementations\) error](<#RunWithHarnesses>)
- [type ConfigGenerator](<#ConfigGenerator>)
  - [func NewConfigGenerator\(\) \*ConfigGenerator](<#NewConfigGenerator>)
  - [func \(c \*ConfigGenerator\) GenerateConfigs\(\) \(\*Settings, \*Implementations\)](<#ConfigGenerator.GenerateConfigs>)
  - [func \(c \*ConfigGenerator\) GetGlobalSeed\(\) uint64](<#ConfigGenerator.GetGlobalSeed>)
  - [func \(c \*ConfigGenerator\) GetPartition\(name string\) \*PartitionConfig](<#ConfigGenerator.GetPartition>)
  - [func \(c \*ConfigGenerator\) GetSimulation\(\) \*SimulationConfig](<#ConfigGenerator.GetSimulation>)
  - [func \(c \*ConfigGenerator\) ResetPartition\(name string, config \*PartitionConfig\)](<#ConfigGenerator.ResetPartition>)
  - [func \(c \*ConfigGenerator\) SetGlobalSeed\(seed uint64\)](<#ConfigGenerator.SetGlobalSeed>)
  - [func \(c \*ConfigGenerator\) SetPartition\(config \*PartitionConfig\)](<#ConfigGenerator.SetPartition>)
  - [func \(c \*ConfigGenerator\) SetSimulation\(config \*SimulationConfig\)](<#ConfigGenerator.SetSimulation>)
- [type ConstantTimestepFunction](<#ConstantTimestepFunction>)
  - [func \(t \*ConstantTimestepFunction\) NextIncrement\(timestepsHistory \*CumulativeTimestepsHistory\) float64](<#ConstantTimestepFunction.NextIncrement>)
- [type CumulativeTimestepsHistory](<#CumulativeTimestepsHistory>)
- [type DownstreamStateValues](<#DownstreamStateValues>)
- [type EveryNStepsOutputCondition](<#EveryNStepsOutputCondition>)
  - [func \(c \*EveryNStepsOutputCondition\) IsOutputStep\(partitionName string, state \[\]float64, cumulativeTimesteps float64\) bool](<#EveryNStepsOutputCondition.IsOutputStep>)
- [type EveryStepOutputCondition](<#EveryStepOutputCondition>)
  - [func \(c \*EveryStepOutputCondition\) IsOutputStep\(partitionName string, state \[\]float64, cumulativeTimesteps float64\) bool](<#EveryStepOutputCondition.IsOutputStep>)
- [type ExponentialDistributionTimestepFunction](<#ExponentialDistributionTimestepFunction>)
  - [func NewExponentialDistributionTimestepFunction\(mean float64, seed uint64\) \*ExponentialDistributionTimestepFunction](<#NewExponentialDistributionTimestepFunction>)
  - [func \(t \*ExponentialDistributionTimestepFunction\) NextIncrement\(timestepsHistory \*CumulativeTimestepsHistory\) float64](<#ExponentialDistributionTimestepFunction.NextIncrement>)
- [type Implementations](<#Implementations>)
- [type Iteration](<#Iteration>)
- [type IterationSettings](<#IterationSettings>)
- [type IterationTestHarness](<#IterationTestHarness>)
  - [func \(h \*IterationTestHarness\) Configure\(partitionIndex int, settings \*Settings\)](<#IterationTestHarness.Configure>)
  - [func \(h \*IterationTestHarness\) Iterate\(params \*Params, partitionIndex int, stateHistories \[\]\*StateHistory, timestepsHistory \*CumulativeTimestepsHistory\) \[\]float64](<#IterationTestHarness.Iterate>)
- [type IteratorInputMessage](<#IteratorInputMessage>)
- [type JsonLogChannelOutputFunction](<#JsonLogChannelOutputFunction>)
  - [func NewJsonLogChannelOutputFunction\(filePath string\) \*JsonLogChannelOutputFunction](<#NewJsonLogChannelOutputFunction>)
  - [func \(j \*JsonLogChannelOutputFunction\) Close\(\)](<#JsonLogChannelOutputFunction.Close>)
  - [func \(j \*JsonLogChannelOutputFunction\) Output\(partitionName string, state \[\]float64, cumulativeTimesteps float64\)](<#JsonLogChannelOutputFunction.Output>)
- [type JsonLogEntry](<#JsonLogEntry>)
- [type JsonLogOutputFunction](<#JsonLogOutputFunction>)
  - [func NewJsonLogOutputFunction\(filePath string\) \*JsonLogOutputFunction](<#NewJsonLogOutputFunction>)
  - [func \(j \*JsonLogOutputFunction\) Output\(partitionName string, state \[\]float64, cumulativeTimesteps float64\)](<#JsonLogOutputFunction.Output>)
- [type NamedPartitionIndex](<#NamedPartitionIndex>)
- [type NamedUpstreamConfig](<#NamedUpstreamConfig>)
- [type NilOutputCondition](<#NilOutputCondition>)
  - [func \(c \*NilOutputCondition\) IsOutputStep\(partitionName string, state \[\]float64, cumulativeTimesteps float64\) bool](<#NilOutputCondition.IsOutputStep>)
- [type NilOutputFunction](<#NilOutputFunction>)
  - [func \(f \*NilOutputFunction\) Output\(partitionName string, state \[\]float64, cumulativeTimesteps float64\)](<#NilOutputFunction.Output>)
- [type NumberOfStepsTerminationCondition](<#NumberOfStepsTerminationCondition>)
  - [func \(t \*NumberOfStepsTerminationCondition\) Terminate\(stateHistories \[\]\*StateHistory, timestepsHistory \*CumulativeTimestepsHistory\) bool](<#NumberOfStepsTerminationCondition.Terminate>)
- [type OnlyGivenPartitionsOutputCondition](<#OnlyGivenPartitionsOutputCondition>)
  - [func \(o \*OnlyGivenPartitionsOutputCondition\) IsOutputStep\(partitionName string, state \[\]float64, cumulativeTimesteps float64\) bool](<#OnlyGivenPartitionsOutputCondition.IsOutputStep>)
- [type OutputCondition](<#OutputCondition>)
- [type OutputFunction](<#OutputFunction>)
- [type Params](<#Params>)
  - [func NewParams\(params map\[string\]\[\]float64\) Params](<#NewParams>)
  - [func \(p \*Params\) Get\(name string\) \[\]float64](<#Params.Get>)
  - [func \(p \*Params\) GetCopy\(name string\) \[\]float64](<#Params.GetCopy>)
  - [func \(p \*Params\) GetCopyOk\(name string\) \(\[\]float64, bool\)](<#Params.GetCopyOk>)
  - [func \(p \*Params\) GetIndex\(name string, index int\) float64](<#Params.GetIndex>)
  - [func \(p \*Params\) GetOk\(name string\) \(\[\]float64, bool\)](<#Params.GetOk>)
  - [func \(p \*Params\) Set\(name string, values \[\]float64\)](<#Params.Set>)
  - [func \(p \*Params\) SetIndex\(name string, index int, value float64\)](<#Params.SetIndex>)
  - [func \(p \*Params\) SetPartitionName\(name string\)](<#Params.SetPartitionName>)
- [type PartitionConfig](<#PartitionConfig>)
  - [func LoadPartitionConfigFromYaml\(path string\) \*PartitionConfig](<#LoadPartitionConfigFromYaml>)
  - [func \(p \*PartitionConfig\) Init\(\)](<#PartitionConfig.Init>)
- [type PartitionConfigOrdering](<#PartitionConfigOrdering>)
  - [func \(p \*PartitionConfigOrdering\) Append\(config \*PartitionConfig\)](<#PartitionConfigOrdering.Append>)
- [type PartitionCoordinator](<#PartitionCoordinator>)
  - [func NewPartitionCoordinator\(settings \*Settings, implementations \*Implementations\) \*PartitionCoordinator](<#NewPartitionCoordinator>)
  - [func \(c \*PartitionCoordinator\) ReadyToTerminate\(\) bool](<#PartitionCoordinator.ReadyToTerminate>)
  - [func \(c \*PartitionCoordinator\) RequestMoreIterations\(wg \*sync.WaitGroup\)](<#PartitionCoordinator.RequestMoreIterations>)
  - [func \(c \*PartitionCoordinator\) Run\(\)](<#PartitionCoordinator.Run>)
  - [func \(c \*PartitionCoordinator\) Step\(wg \*sync.WaitGroup\)](<#PartitionCoordinator.Step>)
  - [func \(c \*PartitionCoordinator\) UpdateHistory\(wg \*sync.WaitGroup\)](<#PartitionCoordinator.UpdateHistory>)
- [type PartitionState](<#PartitionState>)
  - [func \(\*PartitionState\) Descriptor\(\) \(\[\]byte, \[\]int\)](<#PartitionState.Descriptor>)
  - [func \(x \*PartitionState\) GetCumulativeTimesteps\(\) float64](<#PartitionState.GetCumulativeTimesteps>)
  - [func \(x \*PartitionState\) GetPartitionName\(\) string](<#PartitionState.GetPartitionName>)
  - [func \(x \*PartitionState\) GetState\(\) \[\]float64](<#PartitionState.GetState>)
  - [func \(\*PartitionState\) ProtoMessage\(\)](<#PartitionState.ProtoMessage>)
  - [func \(x \*PartitionState\) ProtoReflect\(\) protoreflect.Message](<#PartitionState.ProtoReflect>)
  - [func \(x \*PartitionState\) Reset\(\)](<#PartitionState.Reset>)
  - [func \(x \*PartitionState\) String\(\) string](<#PartitionState.String>)
- [type Settings](<#Settings>)
  - [func LoadSettingsFromYaml\(path string\) \*Settings](<#LoadSettingsFromYaml>)
  - [func \(s \*Settings\) Init\(\)](<#Settings.Init>)
- [type SimulationConfig](<#SimulationConfig>)
- [type SimulationConfigStrings](<#SimulationConfigStrings>)
  - [func LoadSimulationConfigStringsFromYaml\(path string\) \*SimulationConfigStrings](<#LoadSimulationConfigStringsFromYaml>)
- [type StateHistory](<#StateHistory>)
  - [func \(s \*StateHistory\) CopyStateRow\(index int\) \[\]float64](<#StateHistory.CopyStateRow>)
  - [func \(s \*StateHistory\) GetNextStateRowToUpdate\(\) \[\]float64](<#StateHistory.GetNextStateRowToUpdate>)
- [type StateIterator](<#StateIterator>)
  - [func NewStateIterator\(iteration Iteration, params Params, partitionName string, partitionIndex int, valueChannels StateValueChannels, outputCondition OutputCondition, outputFunction OutputFunction, initState \[\]float64, initTime float64\) \*StateIterator](<#NewStateIterator>)
  - [func \(s \*StateIterator\) Iterate\(stateHistories \[\]\*StateHistory, timestepsHistory \*CumulativeTimestepsHistory\) \[\]float64](<#StateIterator.Iterate>)
  - [func \(s \*StateIterator\) ReceiveAndIteratePending\(inputChannel \<\-chan \*IteratorInputMessage\)](<#StateIterator.ReceiveAndIteratePending>)
  - [func \(s \*StateIterator\) UpdateHistory\(inputChannel \<\-chan \*IteratorInputMessage\)](<#StateIterator.UpdateHistory>)
- [type StateTimeStorage](<#StateTimeStorage>)
  - [func NewStateTimeStorage\(\) \*StateTimeStorage](<#NewStateTimeStorage>)
  - [func \(s \*StateTimeStorage\) ConcurrentAppend\(name string, time float64, values \[\]float64\)](<#StateTimeStorage.ConcurrentAppend>)
  - [func \(s \*StateTimeStorage\) GetIndex\(name string\) int](<#StateTimeStorage.GetIndex>)
  - [func \(s \*StateTimeStorage\) GetNames\(\) \[\]string](<#StateTimeStorage.GetNames>)
  - [func \(s \*StateTimeStorage\) GetTimes\(\) \[\]float64](<#StateTimeStorage.GetTimes>)
  - [func \(s \*StateTimeStorage\) GetValues\(name string\) \[\]\[\]float64](<#StateTimeStorage.GetValues>)
  - [func \(s \*StateTimeStorage\) SetTimes\(times \[\]float64\)](<#StateTimeStorage.SetTimes>)
  - [func \(s \*StateTimeStorage\) SetValues\(name string, values \[\]\[\]float64\)](<#StateTimeStorage.SetValues>)
- [type StateTimeStorageOutputFunction](<#StateTimeStorageOutputFunction>)
  - [func \(f \*StateTimeStorageOutputFunction\) Output\(partitionName string, state \[\]float64, cumulativeTimesteps float64\)](<#StateTimeStorageOutputFunction.Output>)
- [type StateValueChannels](<#StateValueChannels>)
  - [func \(s \*StateValueChannels\) BroadcastDownstream\(stateValues \[\]float64\)](<#StateValueChannels.BroadcastDownstream>)
  - [func \(s \*StateValueChannels\) UpdateUpstreamParams\(params \*Params\)](<#StateValueChannels.UpdateUpstreamParams>)
- [type StdoutOutputFunction](<#StdoutOutputFunction>)
  - [func \(s \*StdoutOutputFunction\) Output\(partitionName string, state \[\]float64, cumulativeTimesteps float64\)](<#StdoutOutputFunction.Output>)
- [type TerminationCondition](<#TerminationCondition>)
- [type TimeElapsedTerminationCondition](<#TimeElapsedTerminationCondition>)
  - [func \(t \*TimeElapsedTerminationCondition\) Terminate\(stateHistories \[\]\*StateHistory, timestepsHistory \*CumulativeTimestepsHistory\) bool](<#TimeElapsedTerminationCondition.Terminate>)
- [type TimestepFunction](<#TimestepFunction>)
- [type UpstreamConfig](<#UpstreamConfig>)
- [type UpstreamStateValues](<#UpstreamStateValues>)
- [type WebsocketOutputFunction](<#WebsocketOutputFunction>)
  - [func NewWebsocketOutputFunction\(connection \*websocket.Conn, mutex \*sync.Mutex\) \*WebsocketOutputFunction](<#NewWebsocketOutputFunction>)
  - [func \(w \*WebsocketOutputFunction\) Output\(partitionName string, state \[\]float64, cumulativeTimesteps float64\)](<#WebsocketOutputFunction.Output>)


## Variables

<a name="File_cmd_messages_partition_state_proto"></a>


```go
var File_cmd_messages_partition_state_proto protoreflect.FileDescriptor
```

<a name="RunWithHarnesses"></a>

## func [RunWithHarnesses](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/harness.go#L127>)

```go
func RunWithHarnesses(settings *Settings, implementations *Implementations) error
```

RunWithHarnesses runs all iterations, each wrapped in a test harness and returns any errors if found. The simulation is also run twice to check for statefulness residues.

<a name="ConfigGenerator"></a>

## type [ConfigGenerator](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L152-L156>)

ConfigGenerator enables users to dynamically configure a stochadex simulation programmatically while providing tools for just\-in\-time generation of the necessary Implementation and Settings configs required to create a new PartitionCoordinator through the .GenerateConfigs method.

```go
type ConfigGenerator struct {
    // contains filtered or unexported fields
}
```

<a name="NewConfigGenerator"></a>

### func [NewConfigGenerator](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L281>)

```go
func NewConfigGenerator() *ConfigGenerator
```

NewConfigGenerator creates a new ConfigGenerator.

<a name="ConfigGenerator.GenerateConfigs"></a>

### func \(\*ConfigGenerator\) [GenerateConfigs](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L211>)

```go
func (c *ConfigGenerator) GenerateConfigs() (*Settings, *Implementations)
```

GenerateConfigs generates the necessary Implementation and Settings configs required to create a new PartitionCoordinator based on the currently configured simulation that is represented by the generator.

<a name="ConfigGenerator.GetGlobalSeed"></a>

### func \(\*ConfigGenerator\) [GetGlobalSeed](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L159>)

```go
func (c *ConfigGenerator) GetGlobalSeed() uint64
```

GetGlobalSeed retrieves what global seed is currently set.

<a name="ConfigGenerator.GetPartition"></a>

### func \(\*ConfigGenerator\) [GetPartition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L186>)

```go
func (c *ConfigGenerator) GetPartition(name string) *PartitionConfig
```

GetPartition retrieves a partition config in the generator using on its name.

<a name="ConfigGenerator.GetSimulation"></a>

### func \(\*ConfigGenerator\) [GetSimulation](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L175>)

```go
func (c *ConfigGenerator) GetSimulation() *SimulationConfig
```

GetSimulation retrieves the current configured simulation config that is in the generator.

<a name="ConfigGenerator.ResetPartition"></a>

### func \(\*ConfigGenerator\) [ResetPartition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L199>)

```go
func (c *ConfigGenerator) ResetPartition(name string, config *PartitionConfig)
```

ResetPartition allows the user to reset the config for a partition by name.

<a name="ConfigGenerator.SetGlobalSeed"></a>

### func \(\*ConfigGenerator\) [SetGlobalSeed](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L165>)

```go
func (c *ConfigGenerator) SetGlobalSeed(seed uint64)
```

SetGlobalSeed sets a random seed for each partition in the simulation based on a process which itself is dependent on the input random seed.

<a name="ConfigGenerator.SetPartition"></a>

### func \(\*ConfigGenerator\) [SetPartition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L193>)

```go
func (c *ConfigGenerator) SetPartition(config *PartitionConfig)
```

SetPartition sets another new partition config in the generator which must have a unique name field to every other one which currently exists otherwise there is an error.

<a name="ConfigGenerator.SetSimulation"></a>

### func \(\*ConfigGenerator\) [SetSimulation](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L180>)

```go
func (c *ConfigGenerator) SetSimulation(config *SimulationConfig)
```

SetSimulation sets a new simulation config in the generator.

<a name="ConstantTimestepFunction"></a>

## type [ConstantTimestepFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/timesteps.go#L18-L20>)

ConstantTimestepFunction iterates the timestep by a constant stepsize.

```go
type ConstantTimestepFunction struct {
    Stepsize float64
}
```

<a name="ConstantTimestepFunction.NextIncrement"></a>

### func \(\*ConstantTimestepFunction\) [NextIncrement](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/timesteps.go#L22-L24>)

```go
func (t *ConstantTimestepFunction) NextIncrement(timestepsHistory *CumulativeTimestepsHistory) float64
```



<a name="CumulativeTimestepsHistory"></a>

## type [CumulativeTimestepsHistory](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/histories.go#L38-L43>)

CumulativeTimestepsHistory is a windowed history of cumulative timestep values which includes the next value to increment time by and number of steps taken.

```go
type CumulativeTimestepsHistory struct {
    NextIncrement     float64
    Values            *mat.VecDense
    CurrentStepNumber int
    StateHistoryDepth int
}
```

<a name="DownstreamStateValues"></a>

## type [DownstreamStateValues](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L27-L30>)

DownstreamStateValues contains the information needed to send state values to a computationally\-downstream StateIterator.

```go
type DownstreamStateValues struct {
    Channel chan []float64
    Copies  int
}
```

<a name="EveryNStepsOutputCondition"></a>

## type [EveryNStepsOutputCondition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L260-L263>)

EveryNStepsOutputCondition calls the OutputFunction once for every N steps that occur.

```go
type EveryNStepsOutputCondition struct {
    N int
    // contains filtered or unexported fields
}
```

<a name="EveryNStepsOutputCondition.IsOutputStep"></a>

### func \(\*EveryNStepsOutputCondition\) [IsOutputStep](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L265-L269>)

```go
func (c *EveryNStepsOutputCondition) IsOutputStep(partitionName string, state []float64, cumulativeTimesteps float64) bool
```



<a name="EveryStepOutputCondition"></a>

## type [EveryStepOutputCondition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L248>)

EveryStepOutputCondition calls the OutputFunction at every step.

```go
type EveryStepOutputCondition struct{}
```

<a name="EveryStepOutputCondition.IsOutputStep"></a>

### func \(\*EveryStepOutputCondition\) [IsOutputStep](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L250-L254>)

```go
func (c *EveryStepOutputCondition) IsOutputStep(partitionName string, state []float64, cumulativeTimesteps float64) bool
```



<a name="ExponentialDistributionTimestepFunction"></a>

## type [ExponentialDistributionTimestepFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/timesteps.go#L30-L34>)

ExponentialDistributionTimestepFunction iterates the timestep by a new sample drawn from an exponential distribution with hyperparameters set by Mean and Seed.

```go
type ExponentialDistributionTimestepFunction struct {
    Mean float64
    Seed uint64
    // contains filtered or unexported fields
}
```

<a name="NewExponentialDistributionTimestepFunction"></a>

### func [NewExponentialDistributionTimestepFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/timesteps.go#L44-L47>)

```go
func NewExponentialDistributionTimestepFunction(mean float64, seed uint64) *ExponentialDistributionTimestepFunction
```

New ExponentialDistributionTimestepFunction creates a new ExponentialDistributionTimestepFunction given a mean and seed.

<a name="ExponentialDistributionTimestepFunction.NextIncrement"></a>

### func \(\*ExponentialDistributionTimestepFunction\) [NextIncrement](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/timesteps.go#L36-L38>)

```go
func (t *ExponentialDistributionTimestepFunction) NextIncrement(timestepsHistory *CumulativeTimestepsHistory) float64
```



<a name="Implementations"></a>

## type [Implementations](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L60-L66>)

Implementations defines all of the interfaces that must be implemented in order to configure a simulation defined by the stochadex.

```go
type Implementations struct {
    Iterations           []Iteration
    OutputCondition      OutputCondition
    OutputFunction       OutputFunction
    TerminationCondition TerminationCondition
    TimestepFunction     TimestepFunction
}
```

<a name="Iteration"></a>

## type [Iteration](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L8-L16>)

Iteration is the interface that must be implemented for any partitioned state iteration in the stochadex. Its .Iterate method reads in the \*Params, a int partitionIndex, the full current history of all partitions defined by a slice \[\]\*StateHistory and a \*CumulativeTimestepsHistory reference and outputs an updated state history row in the form of a float64 slice.

```go
type Iteration interface {
    Configure(partitionIndex int, settings *Settings)
    Iterate(
        params *Params,
        partitionIndex int,
        stateHistories []*StateHistory,
        timestepsHistory *CumulativeTimestepsHistory,
    ) []float64
}
```

<a name="IterationSettings"></a>

## type [IterationSettings](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L19-L27>)

IterationSettings is the yaml\-loadable config which defines the settings for an iteration which acts on a partition of the the global simulation state and its upstream partitions which may provide params for it.

```go
type IterationSettings struct {
    Name               string                    `yaml:"name"`
    Params             Params                    `yaml:"params"`
    ParamsFromUpstream map[string]UpstreamConfig `yaml:"params_from_upstream,omitempty"`
    InitStateValues    []float64                 `yaml:"init_state_values"`
    Seed               uint64                    `yaml:"seed"`
    StateWidth         int                       `yaml:"state_width"`
    StateHistoryDepth  int                       `yaml:"state_history_depth"`
}
```

<a name="IterationTestHarness"></a>

## type [IterationTestHarness](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/harness.go#L13-L18>)

IterationTestHarness wraps an iteration and performs checks on its behaviour while running.

```go
type IterationTestHarness struct {
    Iteration Iteration
    Err       error
    // contains filtered or unexported fields
}
```

<a name="IterationTestHarness.Configure"></a>

### func \(\*IterationTestHarness\) [Configure](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/harness.go#L20-L23>)

```go
func (h *IterationTestHarness) Configure(partitionIndex int, settings *Settings)
```



<a name="IterationTestHarness.Iterate"></a>

### func \(\*IterationTestHarness\) [Iterate](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/harness.go#L34-L39>)

```go
func (h *IterationTestHarness) Iterate(params *Params, partitionIndex int, stateHistories []*StateHistory, timestepsHistory *CumulativeTimestepsHistory) []float64
```



<a name="IteratorInputMessage"></a>

## type [IteratorInputMessage](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/histories.go#L48-L51>)

IteratorInputMessage defines the message which is passed from the PartitionCoordinator to a StateIterator of a given partition when the former is requesting the latter to perform a job.

```go
type IteratorInputMessage struct {
    StateHistories   []*StateHistory
    TimestepsHistory *CumulativeTimestepsHistory
}
```

<a name="JsonLogChannelOutputFunction"></a>

## type [JsonLogChannelOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L114-L116>)

JsonLogChannelOutputFunction outputs data to a log of json packets from the simulation on the steps where the OutputCondition is met. This is functionally the same as the JsonLogOutputFunction but runs in its own thread and receives logs via channel for improved performance.

```go
type JsonLogChannelOutputFunction struct {
    // contains filtered or unexported fields
}
```

<a name="NewJsonLogChannelOutputFunction"></a>

### func [NewJsonLogChannelOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L140-L142>)

```go
func NewJsonLogChannelOutputFunction(filePath string) *JsonLogChannelOutputFunction
```

NewJsonLogChannelOutputFunction creates a new JsonLogChannelOutputFunction. This creates a new channel which can be deferred to close so that flushing at the end of a run is ensured like this: f = NewJsonLogChannelOutputFunction\("file.log"\); defer f.Close\(\)

<a name="JsonLogChannelOutputFunction.Close"></a>

### func \(\*JsonLogChannelOutputFunction\) [Close](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L132>)

```go
func (j *JsonLogChannelOutputFunction) Close()
```

Close ensures that the log channel flushes at the end of a run.

<a name="JsonLogChannelOutputFunction.Output"></a>

### func \(\*JsonLogChannelOutputFunction\) [Output](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L118-L122>)

```go
func (j *JsonLogChannelOutputFunction) Output(partitionName string, state []float64, cumulativeTimesteps float64)
```



<a name="JsonLogEntry"></a>

## type [JsonLogEntry](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L59-L63>)

JsonLogEntry is the format in which the logs are serialised when using the JsonLogOutputFunction.

```go
type JsonLogEntry struct {
    PartitionName       string    `json:"partition_name"`
    State               []float64 `json:"state"`
    CumulativeTimesteps float64   `json:"time"`
}
```

<a name="JsonLogOutputFunction"></a>

## type [JsonLogOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L67-L70>)

JsonLogOutputFunction outputs data to a log of json packets from the simulation on the steps where the OutputCondition is met.

```go
type JsonLogOutputFunction struct {
    // contains filtered or unexported fields
}
```

<a name="NewJsonLogOutputFunction"></a>

### func [NewJsonLogOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L98-L100>)

```go
func NewJsonLogOutputFunction(filePath string) *JsonLogOutputFunction
```

NewJsonLogOutputFunction creates a new JsonLogOutputFunction.

<a name="JsonLogOutputFunction.Output"></a>

### func \(\*JsonLogOutputFunction\) [Output](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L72-L76>)

```go
func (j *JsonLogOutputFunction) Output(partitionName string, state []float64, cumulativeTimesteps float64)
```



<a name="NamedPartitionIndex"></a>

## type [NamedPartitionIndex](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L67-L70>)

NamedPartitionIndex pairs the name of a partition with the partition index assigned to it by the PartitionCoordinator.

```go
type NamedPartitionIndex struct {
    Name  string
    Index int
}
```

<a name="NamedUpstreamConfig"></a>

## type [NamedUpstreamConfig](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L71-L74>)

NamedUpstreamConfig is the yaml\-loadable representation of a slice of data from the output of a partitiion which is computationally upstream. This version uses a string name for this partition.

```go
type NamedUpstreamConfig struct {
    Upstream string `yaml:"upstream"`
    Indices  []int  `yaml:"indices,omitempty"`
}
```

<a name="NilOutputCondition"></a>

## type [NilOutputCondition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L237>)

NilOutputCondition never outputs.

```go
type NilOutputCondition struct{}
```

<a name="NilOutputCondition.IsOutputStep"></a>

### func \(\*NilOutputCondition\) [IsOutputStep](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L239-L243>)

```go
func (c *NilOutputCondition) IsOutputStep(partitionName string, state []float64, cumulativeTimesteps float64) bool
```



<a name="NilOutputFunction"></a>

## type [NilOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L22>)

NilOutputFunction outputs nothing from the simulation.

```go
type NilOutputFunction struct{}
```

<a name="NilOutputFunction.Output"></a>

### func \(\*NilOutputFunction\) [Output](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L24-L28>)

```go
func (f *NilOutputFunction) Output(partitionName string, state []float64, cumulativeTimesteps float64)
```



<a name="NumberOfStepsTerminationCondition"></a>

## type [NumberOfStepsTerminationCondition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/termination.go#L14-L16>)

NumberOfStepsTerminationCondition terminates the process when the overall number of steps performed has reached MaxNumberOfSteps.

```go
type NumberOfStepsTerminationCondition struct {
    MaxNumberOfSteps int
}
```

<a name="NumberOfStepsTerminationCondition.Terminate"></a>

### func \(\*NumberOfStepsTerminationCondition\) [Terminate](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/termination.go#L18-L21>)

```go
func (t *NumberOfStepsTerminationCondition) Terminate(stateHistories []*StateHistory, timestepsHistory *CumulativeTimestepsHistory) bool
```



<a name="OnlyGivenPartitionsOutputCondition"></a>

## type [OnlyGivenPartitionsOutputCondition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L280-L282>)

OnlyGivenPartitionsOutputCondition calls the OutputFunction for only the given partition names.

```go
type OnlyGivenPartitionsOutputCondition struct {
    Partitions map[string]bool
}
```

<a name="OnlyGivenPartitionsOutputCondition.IsOutputStep"></a>

### func \(\*OnlyGivenPartitionsOutputCondition\) [IsOutputStep](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L284-L288>)

```go
func (o *OnlyGivenPartitionsOutputCondition) IsOutputStep(partitionName string, state []float64, cumulativeTimesteps float64) bool
```



<a name="OutputCondition"></a>

## type [OutputCondition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L232-L234>)

OutputCondition is the interface that must be implemented to define when the simulation calls the OutputFunction.

```go
type OutputCondition interface {
    IsOutputStep(partitionName string, state []float64, cumulativeTimesteps float64) bool
}
```

<a name="OutputFunction"></a>

## type [OutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L17-L19>)

OutputFunction is the interface that must be implemented for any function which can be used to outputs data from the simulation when the provided OutputCondition is met.

```go
type OutputFunction interface {
    Output(partitionName string, state []float64, cumulativeTimesteps float64)
}
```

<a name="Params"></a>

## type [Params](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L7-L10>)

Params is a type alias for the parameters needed to configure the simulation.

```go
type Params struct {
    Map map[string][]float64 `yaml:",inline"`
    // contains filtered or unexported fields
}
```

<a name="NewParams"></a>

### func [NewParams](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L98>)

```go
func NewParams(params map[string][]float64) Params
```

NewParams creates a new Params struct.

<a name="Params.Get"></a>

### func \(\*Params\) [Get](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L34>)

```go
func (p *Params) Get(name string) []float64
```

Get retrieves the desired parameter values given their name, or panics giving a useful error message.

<a name="Params.GetCopy"></a>

### func \(\*Params\) [GetCopy](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L45>)

```go
func (p *Params) GetCopy(name string) []float64
```

GetCopy retrieves a copy of the desired parameter values given their name, or panics giving a useful error message.

<a name="Params.GetCopyOk"></a>

### func \(\*Params\) [GetCopyOk](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L22>)

```go
func (p *Params) GetCopyOk(name string) ([]float64, bool)
```

GetCopyOk retrieves a copy of the desired parameter values given their name, returning the values and a boolean indicating if the name was found.

<a name="Params.GetIndex"></a>

### func \(\*Params\) [GetIndex](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L59>)

```go
func (p *Params) GetIndex(name string, index int) float64
```

GetIndex retrieves the desired parameter value given the params name and index of the value itself, or panics giving a useful error message.

<a name="Params.GetOk"></a>

### func \(\*Params\) [GetOk](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L14>)

```go
func (p *Params) GetOk(name string) ([]float64, bool)
```

GetOk retrieves the desired parameter values given their name, returning the values and a boolean indicating if the name was found.

<a name="Params.Set"></a>

### func \(\*Params\) [Set](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L69>)

```go
func (p *Params) Set(name string, values []float64)
```

Set creates or updates the desired parameter values given their name.

<a name="Params.SetIndex"></a>

### func \(\*Params\) [SetIndex](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L76>)

```go
func (p *Params) SetIndex(name string, index int, value float64)
```

Set creates or updates the desired parameter value given the params name and index of the value itself, or panics giving a useful error message.

<a name="Params.SetPartitionName"></a>

### func \(\*Params\) [SetPartitionName](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/params.go#L93>)

```go
func (p *Params) SetPartitionName(name string)
```

SetPartitionName sets the partition name that these params are associated to, mainly for providing more informative error messages.

<a name="PartitionConfig"></a>

## type [PartitionConfig](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L79-L88>)

PartitionConfig defines all of the configuration needed in order to add a partition to a stochadex simulation. This is mostly yaml\-loadable, however the Iteration implementation needs to be inserted via templating.

```go
type PartitionConfig struct {
    Name               string                         `yaml:"name"`
    Iteration          Iteration                      `yaml:"-"`
    Params             Params                         `yaml:"params"`
    ParamsAsPartitions map[string][]string            `yaml:"params_as_partitions,omitempty"`
    ParamsFromUpstream map[string]NamedUpstreamConfig `yaml:"params_from_upstream,omitempty"`
    InitStateValues    []float64                      `yaml:"init_state_values"`
    StateHistoryDepth  int                            `yaml:"state_history_depth"`
    Seed               uint64                         `yaml:"seed"`
}
```

<a name="LoadPartitionConfigFromYaml"></a>

### func [LoadPartitionConfigFromYaml](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/loaders.go#L26>)

```go
func LoadPartitionConfigFromYaml(path string) *PartitionConfig
```

LoadPartitionConfigFromYaml creates a new PartitionConfig struct from a provided yaml path.

<a name="PartitionConfig.Init"></a>

### func \(\*PartitionConfig\) [Init](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L93>)

```go
func (p *PartitionConfig) Init()
```

Init checks to see if any of the param maps have not been populated and instantiates them if not. This is typically used immediately after unmarshalling from a yaml config.

<a name="PartitionConfigOrdering"></a>

## type [PartitionConfigOrdering](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L130-L134>)

PartitionConfigOrdering is a structure which maintains various representations of the order in which partitions will be indexed in the simulation. This can be dynamically updated with new partitions using the .Append method.

```go
type PartitionConfigOrdering struct {
    Names        []string
    IndexByName  map[string]int
    ConfigByName map[string]*PartitionConfig
}
```

<a name="PartitionConfigOrdering.Append"></a>

### func \(\*PartitionConfigOrdering\) [Append](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L138>)

```go
func (p *PartitionConfigOrdering) Append(config *PartitionConfig)
```

Append puts another partition into the specified ordering that it will appear in the simulation indexing.

<a name="PartitionCoordinator"></a>

## type [PartitionCoordinator](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/coordinator.go#L12-L18>)

PartitionCoordinator coordinates the assignment of iteration work to separate StateIterator objects on separate goroutines and when to enact these updates on the state history.

```go
type PartitionCoordinator struct {
    Iterators            []*StateIterator
    Shared               *IteratorInputMessage
    TimestepFunction     TimestepFunction
    TerminationCondition TerminationCondition
    // contains filtered or unexported fields
}
```

<a name="NewPartitionCoordinator"></a>

### func [NewPartitionCoordinator](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/coordinator.go#L104-L107>)

```go
func NewPartitionCoordinator(settings *Settings, implementations *Implementations) *PartitionCoordinator
```

NewPartitionCoordinator creates a new PartitionCoordinator given a StochadexConfig.

<a name="PartitionCoordinator.ReadyToTerminate"></a>

### func \(\*PartitionCoordinator\) [ReadyToTerminate](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/coordinator.go#L85>)

```go
func (c *PartitionCoordinator) ReadyToTerminate() bool
```

ReadyToTerminate returns whether or not the process has met the TerminationCondition.

<a name="PartitionCoordinator.RequestMoreIterations"></a>

### func \(\*PartitionCoordinator\) [RequestMoreIterations](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/coordinator.go#L22>)

```go
func (c *PartitionCoordinator) RequestMoreIterations(wg *sync.WaitGroup)
```

RequestMoreIterations spawns a goroutine for each state partition to carry out a ReceiveAndIteratePending job.

<a name="PartitionCoordinator.Run"></a>

### func \(\*PartitionCoordinator\) [Run](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/coordinator.go#L93>)

```go
func (c *PartitionCoordinator) Run()
```

Run runs multiple Step calls up until the TerminationCondition has been met.

<a name="PartitionCoordinator.Step"></a>

### func \(\*PartitionCoordinator\) [Step](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/coordinator.go#L68>)

```go
func (c *PartitionCoordinator) Step(wg *sync.WaitGroup)
```

Step is the main method call of PartitionCoordinator \- call this proceeding a new configuration of the latter to run the desired process for a single step.

<a name="PartitionCoordinator.UpdateHistory"></a>

### func \(\*PartitionCoordinator\) [UpdateHistory](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/coordinator.go#L40>)

```go
func (c *PartitionCoordinator) UpdateHistory(wg *sync.WaitGroup)
```

RequestMoreIterations spawns a goroutine for each state partition to carry out an UpdateHistory job.

<a name="PartitionState"></a>

## type [PartitionState](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L23-L31>)



```go
type PartitionState struct {
    CumulativeTimesteps float64   `protobuf:"fixed64,1,opt,name=cumulative_timesteps,json=cumulativeTimesteps,proto3" json:"cumulative_timesteps,omitempty"`
    PartitionName       string    `protobuf:"bytes,2,opt,name=partition_name,json=partitionName,proto3" json:"partition_name,omitempty"`
    State               []float64 `protobuf:"fixed64,3,rep,packed,name=state,proto3" json:"state,omitempty"`
    // contains filtered or unexported fields
}
```

<a name="PartitionState.Descriptor"></a>

### func \(\*PartitionState\) [Descriptor](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L61>)

```go
func (*PartitionState) Descriptor() ([]byte, []int)
```

Deprecated: Use PartitionState.ProtoReflect.Descriptor instead.

<a name="PartitionState.GetCumulativeTimesteps"></a>

### func \(\*PartitionState\) [GetCumulativeTimesteps](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L65>)

```go
func (x *PartitionState) GetCumulativeTimesteps() float64
```



<a name="PartitionState.GetPartitionName"></a>

### func \(\*PartitionState\) [GetPartitionName](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L72>)

```go
func (x *PartitionState) GetPartitionName() string
```



<a name="PartitionState.GetState"></a>

### func \(\*PartitionState\) [GetState](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L79>)

```go
func (x *PartitionState) GetState() []float64
```



<a name="PartitionState.ProtoMessage"></a>

### func \(\*PartitionState\) [ProtoMessage](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L46>)

```go
func (*PartitionState) ProtoMessage()
```



<a name="PartitionState.ProtoReflect"></a>

### func \(\*PartitionState\) [ProtoReflect](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L48>)

```go
func (x *PartitionState) ProtoReflect() protoreflect.Message
```



<a name="PartitionState.Reset"></a>

### func \(\*PartitionState\) [Reset](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L33>)

```go
func (x *PartitionState) Reset()
```



<a name="PartitionState.String"></a>

### func \(\*PartitionState\) [String](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/partition_state.pb.go#L42>)

```go
func (x *PartitionState) String() string
```



<a name="Settings"></a>

## type [Settings](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L31-L35>)

Settings is the yaml\-loadable config which defines all of the settings that can be set for a simulation defined by the stochadex.

```go
type Settings struct {
    Iterations            []IterationSettings `yaml:"iterations"`
    InitTimeValue         float64             `yaml:"init_time_value"`
    TimestepsHistoryDepth int                 `yaml:"timesteps_history_depth"`
}
```

<a name="LoadSettingsFromYaml"></a>

### func [LoadSettingsFromYaml](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/loaders.go#L10>)

```go
func LoadSettingsFromYaml(path string) *Settings
```

LoadSettingsFromYaml creates a new Settings struct from a provided yaml path.

<a name="Settings.Init"></a>

### func \(\*Settings\) [Init](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L40>)

```go
func (s *Settings) Init()
```

Init checks to see if any of the param maps and iteration names have not not been populated and instantiates them if not. This is typically used immediately after unmarshalling from a yaml config.

<a name="SimulationConfig"></a>

## type [SimulationConfig](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L107-L113>)

SimulationConfig defines all of the additional configuration needed in order to setup a stochadex simulation run.

```go
type SimulationConfig struct {
    OutputCondition      OutputCondition
    OutputFunction       OutputFunction
    TerminationCondition TerminationCondition
    TimestepFunction     TimestepFunction
    InitTimeValue        float64
}
```

<a name="SimulationConfigStrings"></a>

## type [SimulationConfigStrings](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L119-L125>)

SimulationConfigStrings defines all of the additional configuration needed in order to setup a stochadex simulation run. This is the yaml\-loadable version of the config which includes string type names to insert into templating.

```go
type SimulationConfigStrings struct {
    OutputCondition      string  `yaml:"output_condition"`
    OutputFunction       string  `yaml:"output_function"`
    TerminationCondition string  `yaml:"termination_condition"`
    TimestepFunction     string  `yaml:"timestep_function"`
    InitTimeValue        float64 `yaml:"init_time_value"`
}
```

<a name="LoadSimulationConfigStringsFromYaml"></a>

### func [LoadSimulationConfigStringsFromYaml](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/loaders.go#L42>)

```go
func LoadSimulationConfigStringsFromYaml(path string) *SimulationConfigStrings
```

LoadSimulationConfigStringsFromYaml creates a new SimulationConfigStrings struct from a provided yaml path.

<a name="StateHistory"></a>

## type [StateHistory](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/histories.go#L9-L17>)

StateHistory represents the information contained within a windowed history of \[\]float64 state values.

```go
type StateHistory struct {
    // each row is a different state in the history, by convention,
    // starting with the most recent at index = 0
    Values *mat.Dense
    // should be of length = StateWidth
    NextValues        []float64
    StateWidth        int
    StateHistoryDepth int
}
```

<a name="StateHistory.CopyStateRow"></a>

### func \(\*StateHistory\) [CopyStateRow](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/histories.go#L20>)

```go
func (s *StateHistory) CopyStateRow(index int) []float64
```

CopyStateRow copies a row from the state history given the index.

<a name="StateHistory.GetNextStateRowToUpdate"></a>

### func \(\*StateHistory\) [GetNextStateRowToUpdate](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/histories.go#L29>)

```go
func (s *StateHistory) GetNextStateRowToUpdate() []float64
```

GetNextStateRowToUpdate determines whether or not it is necessary to copy the previous row or simply expose it based on whether a history longer than 1 is needed.

<a name="StateIterator"></a>

## type [StateIterator](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L74-L81>)

StateIterator handles iterations of a given state partition on a separate goroutine and reads/writes data from/to the state history.

```go
type StateIterator struct {
    Iteration       Iteration
    Params          Params
    Partition       NamedPartitionIndex
    ValueChannels   StateValueChannels
    OutputCondition OutputCondition
    OutputFunction  OutputFunction
}
```

<a name="NewStateIterator"></a>

### func [NewStateIterator](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L141-L151>)

```go
func NewStateIterator(iteration Iteration, params Params, partitionName string, partitionIndex int, valueChannels StateValueChannels, outputCondition OutputCondition, outputFunction OutputFunction, initState []float64, initTime float64) *StateIterator
```

NewStateIterator creates a new StateIterator, potentially also calling the output function if the condition is met by the initial state and time.

<a name="StateIterator.Iterate"></a>

### func \(\*StateIterator\) [Iterate](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L85-L88>)

```go
func (s *StateIterator) Iterate(stateHistories []*StateHistory, timestepsHistory *CumulativeTimestepsHistory) []float64
```

Iterate takes the state and timesteps history and outputs an updated State struct using an implemented Iteration interface.

<a name="StateIterator.ReceiveAndIteratePending"></a>

### func \(\*StateIterator\) [ReceiveAndIteratePending](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L107-L109>)

```go
func (s *StateIterator) ReceiveAndIteratePending(inputChannel <-chan *IteratorInputMessage)
```

ReceiveAndIteratePending listens for input messages sent to the input channel, runs Iterate when an IteratorInputMessage has been received on the provided inputChannel and then updates an internal pending state update object.

<a name="StateIterator.UpdateHistory"></a>

### func \(\*StateIterator\) [UpdateHistory](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L126>)

```go
func (s *StateIterator) UpdateHistory(inputChannel <-chan *IteratorInputMessage)
```

UpdateHistory should always follow a call to ReceiveAndIteratePending as it enacts the internal pending state update on the StateHistory object passed over the provided inputChannel.

<a name="StateTimeStorage"></a>

## type [StateTimeStorage](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L12-L17>)

StateTimeStorage dynamically adapts its structure to support incoming time series data from the simulation output in a thread\-safe manner. This is done in a way to minimise write blocking for better performance in a concurrent program.

```go
type StateTimeStorage struct {
    // contains filtered or unexported fields
}
```

<a name="NewStateTimeStorage"></a>

### func [NewStateTimeStorage](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L103>)

```go
func NewStateTimeStorage() *StateTimeStorage
```

NewStateTimeStorage creates a new StateTimeStorage.

<a name="StateTimeStorage.ConcurrentAppend"></a>

### func \(\*StateTimeStorage\) [ConcurrentAppend](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L72-L76>)

```go
func (s *StateTimeStorage) ConcurrentAppend(name string, time float64, values []float64)
```

ConcurrentAppend adds another set of values to the time series data keyed by the provided name. This method also handles dynamic extension of the size of the store in response to the inputs, and can safely handle concurrent calls within the same program.

<a name="StateTimeStorage.GetIndex"></a>

### func \(\*StateTimeStorage\) [GetIndex](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L21>)

```go
func (s *StateTimeStorage) GetIndex(name string) int
```

GetIndex retrieves the index for provided a key name. This will make a new index if the name doesn't yet exist in the store.

<a name="StateTimeStorage.GetNames"></a>

### func \(\*StateTimeStorage\) [GetNames](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L33>)

```go
func (s *StateTimeStorage) GetNames() []string
```

GetNames retrieves all the names in the store to key each time series.

<a name="StateTimeStorage.GetTimes"></a>

### func \(\*StateTimeStorage\) [GetTimes](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L59>)

```go
func (s *StateTimeStorage) GetTimes() []float64
```

GetTimes retrieves all the time values.

<a name="StateTimeStorage.GetValues"></a>

### func \(\*StateTimeStorage\) [GetValues](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L43>)

```go
func (s *StateTimeStorage) GetValues(name string) [][]float64
```

GetValues retrieves all the time series values keyed by the name. This method will panic if the name doesn't exist in the store.

<a name="StateTimeStorage.SetTimes"></a>

### func \(\*StateTimeStorage\) [SetTimes](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L64>)

```go
func (s *StateTimeStorage) SetTimes(times []float64)
```

SetTimes sets all the time values.

<a name="StateTimeStorage.SetValues"></a>

### func \(\*StateTimeStorage\) [SetValues](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/storage.go#L54>)

```go
func (s *StateTimeStorage) SetValues(name string, values [][]float64)
```

SetValues sets all the time series values keyed by the name.

<a name="StateTimeStorageOutputFunction"></a>

## type [StateTimeStorageOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L45-L47>)

StateTimeStorageOutputFunction stores the data from the simulation in the provided StateTimeStorage on the steps when the OutputCondition is met.

```go
type StateTimeStorageOutputFunction struct {
    Store *StateTimeStorage
}
```

<a name="StateTimeStorageOutputFunction.Output"></a>

### func \(\*StateTimeStorageOutputFunction\) [Output](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L49-L53>)

```go
func (f *StateTimeStorageOutputFunction) Output(partitionName string, state []float64, cumulativeTimesteps float64)
```



<a name="StateValueChannels"></a>

## type [StateValueChannels](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L35-L38>)

StateValueChannels defines the methods by which separate StateIterators can communicate with each other by sending the values of upstream iterators to downstream parameters via channels.

```go
type StateValueChannels struct {
    Upstreams  map[string]*UpstreamStateValues
    Downstream *DownstreamStateValues
}
```

<a name="StateValueChannels.BroadcastDownstream"></a>

### func \(\*StateValueChannels\) [BroadcastDownstream](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L59>)

```go
func (s *StateValueChannels) BroadcastDownstream(stateValues []float64)
```

BroadcastDownstream broadcasts the computationally\-upstream state values to its configured number of downstreams on the relevant channel.

<a name="StateValueChannels.UpdateUpstreamParams"></a>

### func \(\*StateValueChannels\) [UpdateUpstreamParams](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L42>)

```go
func (s *StateValueChannels) UpdateUpstreamParams(params *Params)
```

UpdateUpstreamParams updates the provided params with the state values which have been provided computationally upstream via channels.

<a name="StdoutOutputFunction"></a>

## type [StdoutOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L32>)

StdoutOutputFunction outputs the state to the terminal.

```go
type StdoutOutputFunction struct{}
```

<a name="StdoutOutputFunction.Output"></a>

### func \(\*StdoutOutputFunction\) [Output](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L34-L38>)

```go
func (s *StdoutOutputFunction) Output(partitionName string, state []float64, cumulativeTimesteps float64)
```



<a name="TerminationCondition"></a>

## type [TerminationCondition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/termination.go#L5-L10>)

TerminationCondition is the interface that must be implemented in order to create a new condition for ending the simulation.

```go
type TerminationCondition interface {
    Terminate(
        stateHistories []*StateHistory,
        timestepsHistory *CumulativeTimestepsHistory,
    ) bool
}
```

<a name="TimeElapsedTerminationCondition"></a>

## type [TimeElapsedTerminationCondition](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/termination.go#L27-L29>)

TimeElapsedTerminationCondition terminates the process when the overall time elapsed has reached MaxTimeElapsed.

```go
type TimeElapsedTerminationCondition struct {
    MaxTimeElapsed float64
}
```

<a name="TimeElapsedTerminationCondition.Terminate"></a>

### func \(\*TimeElapsedTerminationCondition\) [Terminate](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/termination.go#L31-L34>)

```go
func (t *TimeElapsedTerminationCondition) Terminate(stateHistories []*StateHistory, timestepsHistory *CumulativeTimestepsHistory) bool
```



<a name="TimestepFunction"></a>

## type [TimestepFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/timesteps.go#L11-L15>)

TimestepFunction is the interface that must be implemented for a function which evaluates the next increment to the time variable of the simulation.

```go
type TimestepFunction interface {
    NextIncrement(
        timestepsHistory *CumulativeTimestepsHistory,
    ) float64
}
```

<a name="UpstreamConfig"></a>

## type [UpstreamConfig](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/configs.go#L11-L14>)

UpstreamConfig is the yaml\-loadable representation of a slice of data from the output of a partitiion which is computationally upstream.

```go
type UpstreamConfig struct {
    Upstream int   `yaml:"upstream"`
    Indices  []int `yaml:"indices,omitempty"`
}
```

<a name="UpstreamStateValues"></a>

## type [UpstreamStateValues](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/iterator.go#L20-L23>)

UpstreamStateValues contains the information needed to receive state values from a computationally\-upstream StateIterator.

```go
type UpstreamStateValues struct {
    Channel chan []float64
    Indices []int
}
```

<a name="WebsocketOutputFunction"></a>

## type [WebsocketOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L179-L182>)

WebsocketOutputFunction serialises the state of each partition of the simulation and sends this data via a websocket connection on the steps when the OutputCondition is met.

```go
type WebsocketOutputFunction struct {
    // contains filtered or unexported fields
}
```

<a name="NewWebsocketOutputFunction"></a>

### func [NewWebsocketOutputFunction](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L223-L226>)

```go
func NewWebsocketOutputFunction(connection *websocket.Conn, mutex *sync.Mutex) *WebsocketOutputFunction
```

NewWebsocketOutputFunction creates a new WebsocketOutputFunction given a connection struct and mutex to protect concurrent writes to the connection.

<a name="WebsocketOutputFunction.Output"></a>

### func \(\*WebsocketOutputFunction\) [Output](<https://github.com/umbralcalc/stochadex/blob/main/pkg/simulator/output.go#L184-L188>)

```go
func (w *WebsocketOutputFunction) Output(partitionName string, state []float64, cumulativeTimesteps float64)
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
